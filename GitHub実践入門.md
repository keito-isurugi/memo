# GitHub実践入門

## GitHubの世界へようこそ
### 言葉の意味など
- Git
	- Gitリポジトリというデータの貯蔵庫にソースコードなどを入れて利用
- GitHub
	- Gitリポジトリをインターネット上に置くサービス
- Pull Request
	- 自分が変更したコードを取り込んでもらうよう依頼
- Watch
	- 登録しておけばNews Feedに流れてくる
### ソーシャルコーディングをする理由
-  世界中で使われている技術や設計に触れることでエンジニアの能力が向上
- 自身のソースコードを公開することでレベルを見極められる
- News Feedを見ればその人の興味などもわかる

### 主な機能
- Gitリポジトリ
	- 基本的には無料で何個も使える
- Organization
	- 企業で使うアカウントで管理などしやすい
- Issue
	- タスクや問題を管理
	- バグ管理システム、チケット駆動開発など
	- Pull Requestの際にIssueが一つ発行される
	- コミットメッセージに「#7」のようにIssueの発行ID、自動的にIssueからコミットに対してリンクがはられる。
- Wiki
	- 共同で文章を作成
	- ドキュメントやマニュアル
	- GFM
- Pull Request
	- GitHubのリポジトリにpushした変更や機能追加をほかの人のリポジトリに取り込んでもらうための要求を出す機能
	
## GitHub導入
### 誕生の背景
- 分散型バージョン管理システム
- Linuxの創始者LinusTorvalds氏によって、2005年ごろにGitの原型となるプログラムが開発
- Git以前はSubversionなど集中型バージョン管理システムが主流
- 集中型
	- リポジトリが一つ
	- みんなで一つのサーバーを見に行く
	- シンプルだがサーバーに接続できない環境だと閲覧等が不可
- 分散型
	- ユーザーごとにリポジトリをFork
	- Forkとはリポジトリを自分のアカウント以下のリポジトリに複製すること
	- 複雑だが、管理を細かくできるなど
	- 分散型さえ学んでおけば良い
	
	
## Gitを操作しながら学ぶ
### 基本操作
- git init
	- リポジトリを初期化
	- .gitディレクトリが作成される
		- リポジトリデータが格納される
- git status
	- リポジトリの状態を確認
- git add
	- ステージ領域へファイルを追加
- git commit 
	- リポジトリの歴史を記録
- git log
	- コミットログを確認
	- コミットを示すハッシュ値
	- git log -p
- git diff 
	- 変更差分を確認
	- ワークツリー・ステージ領域・最新コミット間の差分を確認するのに利用するコマンド
	- git diff HEAD
		- ワークツリーと最新コミットの差分
		- 今回のコミットと前回のコミットの差分
		- HEADは最新のコミットを参照するポインタ
### ブランチの操作
- ブランチは別々の作業を並行して行う際に使用
- git branch
	- ブランチの一覧
- git checkout -b
	- ブランチを作成し切り替える
	- git branch feature-A　→　git checkout feature-Aと同じ
- git checkout -
	- 一つ前のブランチに切り替える
- トピックブランチ
	- 1つのトピックに集中して他の作業は一切行わないブランチ
	- トピックが達成されたらmasterブランチにマージ
	- masterブランチは常にリリースできる状態にできる
- 統合ブランチ
	- masterブランチ
	- 中途半端な変更は含まない
- git merge 
	- ブランチをマージ
	- git merge --no-ff feature-A
		- ブランチからマージしたことを明確に歴史に残すためにマージコミット
- git log --graph
	- ブランチを視覚的に確認する
	- トピックブランチで分岐、統合された様子がわかりやすく表現されている

### コミットを変更する操作
- git reset 
	- 歴史を戻る
	- git reset --hard ハッシュ
		- 書籍にはハッシュが省略されているが、logで確認してオプションに渡す
		- リポジトリのHEAD、ステージ、現在のワーキングツリーを指定した状態に戻す
- git reflog
	- 現在のリポジトリで行われた作業ログの確認
- git commit --amend
	- 直前のコミットメッセージを修正
- git rebase -i 
	- 歴史を押しつぶして改変
- git commit -am"コメント"
	- git add と git commit -mを一度に行う
- git rebase -i HEAD~2
	- 最新とその前のコミットを改ざん
		- エディタが立ち上がるので最新のコミットをpick→fixupとする	

### リモートリポジトリへの送信
- git remote add origin git@github.com:github-book/git-tutorial.git
	- リモートリポジトリを登録
- git push -u origin main
	- リモートリポジトリへ送信
	- originという名前のリモートリポジトリのmainブランチの内容を送信
	- -uオプションはローカルリポジトリの現在のブランチのupstreamはoriginリポジトリはmasterブランチであるということを同時に設定
		- git pullするときにオプションを与えずとも、このローカルリポジトリのブランチはoriginのmainブランチから取得するようになる

### リモートリポジトリから取得
- git clone
	- リモートリポジトリを取得
- git branch -a
	- リモートブランチも表示
- git checkout -b feature-D origin/feature-D
	- リモートのブランチをチェックアウト
- git pull
	- 最新のリモートリポジトリブランチを取得
	
## GitHubの機能を徹底解説
### ショートカットキー
- shift + /
	- 各画面でのショートカットキー確認
### Issue
- チケットやタスク管理
- #2のような番号が発行される
	- コミットメッセージに「close #2」のように入れると自動でcloseになる
### Pull Request
- 自分で変更したコードを相手のリポジトリに取り込んでもらえるよう依頼するための機能

## 初めてのPull Request
- Fork
- clone
- branch
	- トピックブランチを切る
### リポジトリのメンテンス
- fetchしてmerge
## Pull Requestが送られてきたら
- 開発環境でテストしてマージ、もしくはCI/CDパイプラインを作る
### Pull Requestを取り込む準備
- コードレビュー
	- コードの何行目かを指してコメントできる
- 画像の差分を確認できる


## GitHubを利用した開発フロー
### GitHubFlow
- デプロイを中心とした開発スタイル
	- masterブランチからトピックブランチを切る
	- トピックブランチで編集
	- トピックブランチからmasterブランチにPull Request
### GitHubFlowの具体的な流れ
1. masterブランチは常にデプロイできる状態とする
	- 大きなバグが複数入り込むことはなくなる
	- テストコードがない、テストを落としてしまうコードはmasterブランチにはいれてはいけない
		- CIは必須
2. 新しい作業をするときはmasterブランチから記述的な名前のブランチを作成する
	- user-content-chace-key, submodules-init-task, redis2-transitionなど
		- 開発者が何をしているのか想像できる具体性を持った名前
3. 作成したローカルリポジトリのブランチにコミットする
	- コミットサイズは極力小さくする
		- 付近のコードのインデントを修正、変数のタイポ修正、作業として追加すべきメソッド追加
4. 同名のブランチをGitHubのリポジトリに作成し、定期的にpushする
	- コードのバックアップ、開発者同士のコミュニケーション機会
5. 助けてほしいときやフィードバックが欲しいときはPullRequestを作成し、PullRequestでやりとりする
6. ほかの開発者がレビューし、作業終了を確認したらmasterブランチにマージする
7. masterブランチへマージしたら、ただちにデプロイする
### GitHubFlowを実践するための前提条件
- デプロイ作業は完全自動化
	- CI/CD, GitHub Actions
- テストを重要視する
	- テストの自動化
	- テストを書いて、全て通貨
	- テストコードのメンテナンス





	
	
	
	
	
	
	